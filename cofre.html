<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>O Cofre</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100%;
    height: 100%;
    font-family: 'Montserrat', sans-serif;
    background: black;
    color: white;
    overflow: hidden;
}

/* ---------- PRÓLOGO ---------- */
#intro {
    position: fixed;
    inset: 0;
    background: black;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 40px;
    z-index: 100;
}

.intro-text {
    font-size: 1.4rem;
    opacity: 0;
    transition: opacity 1.5s;
    max-width: 600px;
    line-height: 1.6;
}

/* ---------- BOTÃO ---------- */
#start-btn {
    position: absolute;
    bottom: 12%;
    padding: 14px 36px;
    border: 1px solid white;
    background: transparent;
    color: white;
    border-radius: 30px;
    font-size: 1.1rem;
    cursor: pointer;
}

/* ---------- COFRE ---------- */
#vault {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at center, #222 0%, #000 70%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 2s ease;
}

#vault img {
    width: 220px;
    margin-bottom: 40px;
}

/* ---------- DÍGITOS ---------- */
.dials {
    display: flex;
    gap: 14px;
}

.dial {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.dial button {
    background: transparent;
    border: none;
    color: white;
    font-size: 1.4rem;
    cursor: pointer;
}

.number {
    font-size: 2.2rem;
    margin: 8px 0;
}

/* ---------- TEXTO ---------- */
.hint {
    margin-top: 30px;
    font-size: 0.9rem;
    color: #aaa;
}

/* ---------- SOM ---------- */
audio {
    display: none;
}
</style>
</head>
<body>

<!-- SOM -->
<audio id="ambient" src="ambiente.mp3" loop></audio>

<!-- PRÓLOGO -->
<div id="intro">
    <div class="intro-text" id="text"></div>
    <button id="start-btn">Iniciar</button>
</div>

<!-- COFRE -->
<div id="vault">
    <img src="chest.png" alt="Cofre">

    <div class="dials" id="dials"></div>

    <div class="hint">Talvez nem tudo se abra de primeira.</div>
</div>

<script>
const textEl = document.getElementById("text");
const intro = document.getElementById("intro");
const vault = document.getElementById("vault");
const ambient = document.getElementById("ambient");

const lines = [
    "Algumas coisas não foram feitas para serem abertas de imediato.",
    "Elas esperam.",
    "Não por tempo...",
    "Mas pela pessoa certa.",
    "Este cofre ficou aqui por muito tempo.",
    "Guardando fragmentos.",
    "Começos.",
    "Lembranças.",
    "Se você está vendo isso agora...",
    "Talvez seja porque chegou a hora de tentar."
];

let index = 0;

function showNextLine() {
    if (index >= lines.length) {
        setTimeout(() => {
            intro.style.opacity = 0;
            setTimeout(() => {
                intro.style.display = "none";
                vault.style.opacity = 1;
                vault.style.pointerEvents = "auto";
            }, 2000);
        }, 2000);
        return;
    }

    textEl.style.opacity = 0;
    setTimeout(() => {
        textEl.innerText = lines[index];
        textEl.style.opacity = 1;
        index++;
        setTimeout(showNextLine, 2800);
    }, 800);
}

document.getElementById("start-btn").onclick = () => {
    ambient.volume = 0;
    ambient.play();

    let v = 0;
    const fade = setInterval(() => {
        v += 0.02;
        ambient.volume = Math.min(v, 0.6);
        if (v >= 0.6) clearInterval(fade);
    }, 100);

    document.getElementById("start-btn").style.display = "none";
    showNextLine();
};

/* ---------- COFRE ---------- */
const PASSWORD = [6, 1, 4, 2, 9];
const dials = document.getElementById("dials");
let values = [0, 0, 0, 0, 0];

values.forEach((_, i) => {
    const dial = document.createElement("div");
    dial.className = "dial";

    const up = document.createElement("button");
    up.innerText = "▲";
    up.onclick = () => update(i, 1);

    const num = document.createElement("div");
    num.className = "number";
    num.innerText = "0";

    const down = document.createElement("button");
    down.innerText = "▼";
    down.onclick = () => update(i, -1);

    dial.appendChild(up);
    dial.appendChild(num);
    dial.appendChild(down);
    dials.appendChild(dial);

    dial.num = num;
});

function update(i, delta) {
    values[i] = (values[i] + delta + 10) % 10;
    dials.children[i].num.innerText = values[i];

    if (values.every((v, idx) => v === PASSWORD[idx])) {
        alert("O cofre reagiu...");
    }
}
</script>

</body>
</html>